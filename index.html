<!DOCTYPE html>
<html lang="ko">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
  <meta name="description" content="아빠별의 별자리판(Planisphere)입니다. 별자리를 쉽게 공부하는 데 필요한 교육자료가 되길 희망합니다.">
  <meta name="author" content="JI YONG HO">
  <meta name="robots" content="robots">
  <meta name="keywords" content="Planisphere,별자리판,별자리,밤하늘,아빠별,우주,천문">
  <meta name="og:site_name" content="아빠별 별자리판 Planisphere" />
  <meta name="og:title" content="아빠별 별자리판 Planisphere">
  <meta name="og:type" content="website">
  <meta name="og:description" content="아빠별의 별자리판(Planisphere)입니다. 별자리를 쉽게 공부하는 데 필요한 교육자료가 되길 희망합니다." />
  <meta property="og:image" content="https://jidolstar.github.io/planisphere-js/ogimage.png">
  <link rel="canonical" href="https://jidolstar.github.io/planisphere-js/">
  <title>아빠별 별자리판 Planisphere</title>
  <link rel="stylesheet" href="css/common.css">
  <link rel="stylesheet" href="css/control-panel.css">
  <link rel="stylesheet" href="css/modal.css">
</head>

<body>
  <div id="planisphere"></div>

  <!-- 컨트롤 패널 -->
  <div class="ps-controls" id="ps-controls">
    <div class="ps-controls-bar" id="ps-controls-bar">
      <button class="ps-bar-btn" id="ps-settings">⚙</button>
      <div class="ps-bar-title">날짜/시간 설정</div>
      <button class="ps-bar-btn" id="ps-toggle">−</button>
    </div>
    <div class="ps-controls-body" id="ps-controls-body">
      <div class="row" id="ps-location-row" style="margin-bottom: 4px;">
        <div id="ps-location-display"
          style="flex:1; background:rgba(255,255,255,0.1); padding:6px 10px; border-radius:8px; font-size:12px; display:flex; align-items:center; justify-content:space-between; border:1px solid rgba(255,255,255,0.15);">
          <span id="ps-location-text">위치 정보 로딩중...</span>
          <button id="ps-location-edit"
            style="flex:0 0 auto; width:24px; height:24px; padding:0; border:none; background:none; font-size:14px; cursor:pointer; color:#ffcc00;">📍</button>
        </div>
      </div>
      <div class="row">
        <input type="date" id="ps-date">
        <input type="time" id="ps-time" step="60">
      </div>
      <div class="row">
        <button id="ps-now">지금</button>
        <button data-preset="21" class="ps-preset">밤 9시</button>
        <button data-preset="0" class="ps-preset">자정</button>
      </div>
      <div class="row">
        <div class="ps-adjust-col">
          <span class="ps-adjust-label">년</span>
          <button class="ps-adjust-btn plus" id="year-plus">＋</button>
          <button class="ps-adjust-btn minus" id="year-minus">−</button>
        </div>
        <div class="ps-adjust-col">
          <span class="ps-adjust-label">월</span>
          <button class="ps-adjust-btn plus" id="month-plus">＋</button>
          <button class="ps-adjust-btn minus" id="month-minus">−</button>
        </div>
        <div class="ps-adjust-col">
          <span class="ps-adjust-label">일</span>
          <button class="ps-adjust-btn plus" id="day-plus">＋</button>
          <button class="ps-adjust-btn minus" id="day-minus">−</button>
        </div>
        <div class="ps-adjust-col">
          <span class="ps-adjust-label">시</span>
          <button class="ps-adjust-btn plus" id="hour-plus">＋</button>
          <button class="ps-adjust-btn minus" id="hour-minus">−</button>
        </div>
        <div class="ps-adjust-col">
          <span class="ps-adjust-label">분</span>
          <button class="ps-adjust-btn plus" id="minute-plus">＋</button>
          <button class="ps-adjust-btn minus" id="minute-minus">−</button>
        </div>
      </div>
    </div>
  </div>

  <!-- 설정 모달 -->
  <div class="ps-modal" id="ps-modal" style="display:none;">
    <div class="ps-modal-content">
      <div class="ps-modal-header">
        <button id="ps-modal-close">✕</button>
        <h2>설정</h2>
      </div>
      <div class="ps-modal-body">
        <p id="ps-welcome-text" style="margin:0; font-size:14px; color:#ccc; display:none; text-align: center;">
          👋 아빠별 별자리판에 오신 것을 환영합니다!<br>
          원하는 테마를 선택해 주시고 사용법을 꼭 확인해 주세요.
        </p>
        <section>
          <h3>테마</h3>
          <div class="ps-theme-select">
            <img src="images/theme_default.jpg" alt="기본 테마" data-theme="default">
            <img src="images/theme_dark.jpg" alt="다크 테마" data-theme="dark">
            <img src="images/theme_light.jpg" alt="라이트 테마" data-theme="light">
          </div>
        </section>

        <section>
          <h3>사용법</h3>
          <div id="ps-usage">
            <!-- JS에서 PC/모바일 구분 후 채워넣음 -->
          </div>
        </section>

        <section>
          <h3>제작자</h3>
          <div>
            <ul>
              <li>제작 : 지용호</li>
              <li>이메일 : <a href="mailto:jidolstar@gmail.com">jidolstar@gmail.com</a></li>
              <li>Github : <a href="https://github.com/jidolstar/planisphere-js"
                  target="_blank">jidolstar/planisphere-js</a></li>
            </ul>
          </div>
        </section>

      </div>
    </div>
  </div>

  <!-- 위치 설정 모달 -->
  <div class="ps-modal" id="ps-map-modal" style="display:none;">
    <div class="ps-modal-content" style="max-width: 600px;">
      <div class="ps-modal-header">
        <button id="ps-map-modal-close">✕</button>
        <h2>위치 설정</h2>
      </div>
      <div class="ps-modal-body">
        <div class="ps-map-container" id="ps-map-wrapper">
          <canvas id="ps-map-canvas"></canvas>
          <div class="ps-map-restricted" id="ps-map-restricted-zone">
            선택 제한 구역 (10°N ~ 10°S)
          </div>
        </div>

        <div class="ps-map-info">
          <div>현재 선택: <span id="ps-selected-location-text">지도를 클릭해 주세요</span></div>
          <div style="margin-top: 8px; display: flex; align-items: center; gap: 10px;">
            <span>시간대 (DGMT):</span>
            <input type="number" id="ps-map-dgmt" step="0.5"
              style="width: 60px; background: rgba(255,255,255,0.1); border: 1px solid rgba(255,255,255,0.2); color: #fff; padding: 4px 8px; border-radius: 4px;">
            <span id="ps-map-tz-name"
              style="font-size: 11px; color: #aaa; flex: 1; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></span>
          </div>
        </div>

        <div class="ps-map-footer">
          <button id="ps-map-cancel" style="background:rgba(255,255,255,0.1);">취소</button>
          <button id="ps-map-apply" class="primary" disabled>적용하기</button>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="./js/app/main.js"></script>

  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-FCXVFS01Z7"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'G-FCXVFS01Z7');
  </script>

</body>

</html>